{"version":3,"sources":["app.js"],"names":["document","addEventListener","audioPlayer","getElementById","playButton","querySelector","prevButton","nextButton","shuffleButton","showPlaylistButton","progressBar","musicPlayer","suggestions","refreshButton","playerCover","playerTitle","playerArtist","currentTimeDisplay","totalTimeDisplay","currentSongIndex","currentPlaylist","currentPlayingItem","currentSource","loadSong","song","src","cover","textContent","name","artist","load","playPause","paused","play","classList","replace","pause","updateProgress","progress","currentTime","duration","value","newTime","nextSong","length","then","prevSong","shuffleSong","randomIndex","Math","floor","random","querySelectorAll","forEach","item","albumName","albums","remove","style","display","add","setTimeout","playlistName","playlists","showSongList","playlistSongs","createElement","body","appendChild","innerHTML","index","songItem","loadSongs","grid","shuffledSongs","songs","sort","setAttribute","playAudio","event","stopPropagation","findIndex","s","push","formatTime","logo","location","reload","seconds","minutes","secs","window"],"mappings":"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","sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\r\n    const audioPlayer = document.getElementById('audio-player');\r\n    const playButton = document.querySelector('.play i');\r\n    const prevButton = document.querySelector('.prev');\r\n    const nextButton = document.querySelector('.next');\r\n    const shuffleButton = document.querySelector('.shuffle');\r\n    const showPlaylistButton = document.querySelector('.show-playlist');\r\n    const progressBar = document.getElementById('progress');\r\n    const musicPlayer = document.querySelector('.music-player');\r\n    const suggestions = document.querySelector('.music-suggestions');\r\n    const refreshButton = document.querySelector('.refresh');\r\n\r\n    const playerCover = document.getElementById('album-cover');\r\n    const playerTitle = document.getElementById('song-name');\r\n    const playerArtist = document.getElementById('artist-name');\r\n    const currentTimeDisplay = document.getElementById('current-time');\r\n    const totalTimeDisplay = document.getElementById('total-time');\r\n\r\n    let currentSongIndex = 0;\r\n    let currentPlaylist = [];\r\n    let currentPlayingItem = null;\r\n    let currentSource = \"\";\r\n\r\n    // Hàm tải bài hát\r\n    async function loadSong(song) {\r\n        audioPlayer.src = song.src;\r\n        playerCover.src = song.cover;\r\n        playerTitle.textContent = song.name;\r\n        playerArtist.textContent = song.artist;\r\n        audioPlayer.load();\r\n    }\r\n\r\n    function playPause() {\r\n        if (audioPlayer.paused) {\r\n            audioPlayer.play();\r\n            playButton.classList.replace('fa-play', 'fa-pause');\r\n        } else {\r\n            audioPlayer.pause();\r\n            playButton.classList.replace('fa-pause', 'fa-play');\r\n        }\r\n    }\r\n\r\n    function updateProgress() {\r\n        const progress = (audioPlayer.currentTime / audioPlayer.duration) * 100;\r\n        progressBar.value = progress;\r\n    }\r\n\r\n    progressBar.addEventListener('input', () => {\r\n        const newTime = (progressBar.value / 100) * audioPlayer.duration;\r\n        audioPlayer.currentTime = newTime;\r\n    });\r\n\r\n    function nextSong() {\r\n        currentSongIndex = (currentSongIndex + 1) % currentPlaylist.length;\r\n        loadSong(currentPlaylist[currentSongIndex]).then(() => {\r\n            audioPlayer.play();\r\n            playButton.classList.replace('fa-play', 'fa-pause');\r\n        });\r\n    }\r\n\r\n    function prevSong() {\r\n        currentSongIndex = (currentSongIndex - 1 + currentPlaylist.length) % currentPlaylist.length;\r\n        loadSong(currentPlaylist[currentSongIndex]).then(() => {\r\n            audioPlayer.play();\r\n            playButton.classList.replace('fa-play', 'fa-pause');\r\n        });\r\n    }\r\n\r\n    function shuffleSong() {\r\n        let randomIndex;\r\n        do {\r\n            randomIndex = Math.floor(Math.random() * currentPlaylist.length);\r\n        } while (randomIndex === currentSongIndex);\r\n\r\n        currentSongIndex = randomIndex;\r\n        loadSong(currentPlaylist[currentSongIndex]).then(() => {\r\n            audioPlayer.play();\r\n            playButton.classList.replace('fa-play', 'fa-pause');\r\n        });\r\n    }\r\n\r\n    document.querySelectorAll('.album-item').forEach(item => {\r\n        item.addEventListener('click', () => {\r\n            const albumName = item.querySelector('h3').textContent;\r\n            if (currentSource === \"album\" && currentPlaylist === albums[albumName]) {\r\n                musicPlayer.classList.remove('visible');\r\n                audioPlayer.pause();\r\n                playButton.classList.replace('fa-pause', 'fa-play');\r\n                suggestions.style.display = 'block';\r\n                return;\r\n            }\r\n            currentSource = \"album\";\r\n            currentPlaylist = albums[albumName];\r\n            currentSongIndex = 0;\r\n            loadSong(currentPlaylist[currentSongIndex]).then(() => {\r\n                musicPlayer.classList.add('visible');\r\n                suggestions.style.display = 'none';\r\n                setTimeout(() => {\r\n                    audioPlayer.play();\r\n                    playButton.classList.replace('fa-play', 'fa-pause');\r\n                }, 500);\r\n            });\r\n        });\r\n    });\r\n\r\n    document.querySelectorAll('.playlist-item').forEach(item => {\r\n        item.addEventListener('click', () => {\r\n            const playlistName = item.querySelector('h3').textContent;\r\n            if (currentSource === \"playlist\" && currentPlaylist === playlists[playlistName]) {\r\n                musicPlayer.classList.remove('visible');\r\n                audioPlayer.pause();\r\n                playButton.classList.replace('fa-pause', 'fa-play');\r\n                suggestions.style.display = 'block';\r\n                return;\r\n            }\r\n            currentSource = \"playlist\";\r\n            currentPlaylist = playlists[playlistName];\r\n            currentSongIndex = 0;\r\n            loadSong(currentPlaylist[currentSongIndex]).then(() => {\r\n                musicPlayer.classList.add('visible');\r\n                suggestions.style.display = 'none';\r\n                setTimeout(() => {\r\n                    audioPlayer.play();\r\n                    playButton.classList.replace('fa-play', 'fa-pause');\r\n                }, 500);\r\n            });\r\n        });\r\n    });\r\n\r\n    function showSongList() {\r\n        let playlistSongs = document.querySelector('.playlist-songs');\r\n        if (!playlistSongs) {\r\n            playlistSongs = document.createElement('ul');\r\n            playlistSongs.classList.add('playlist-songs');\r\n            document.body.appendChild(playlistSongs);\r\n        }\r\n        playlistSongs.innerHTML = '';\r\n        currentPlaylist.forEach((song, index) => {\r\n            const songItem = document.createElement('li');\r\n            songItem.textContent = `${song.name} - ${song.artist}`;\r\n            songItem.addEventListener('click', () => {\r\n                currentSongIndex = index;\r\n                loadSong(currentPlaylist[currentSongIndex]).then(() => {\r\n                    audioPlayer.play();\r\n                    playButton.classList.replace('fa-play', 'fa-pause');\r\n                });\r\n            });\r\n            playlistSongs.appendChild(songItem);\r\n        });\r\n        playlistSongs.style.display = playlistSongs.style.display === 'none' ? 'block' : 'none';\r\n    }\r\n\r\n    function loadSongs() {\r\n        const grid = document.getElementById('suggestions-grid');\r\n        grid.innerHTML = '';\r\n        let shuffledSongs = [...songs].sort(() => Math.random() - 0.5);\r\n        shuffledSongs.forEach(song => {\r\n            const songItem = document.createElement('div');\r\n            songItem.classList.add('song-item');\r\n            songItem.setAttribute('data-src', song.src);\r\n            songItem.innerHTML = `\r\n                <img src=\"${song.cover}\" alt=\"${song.name}\">\r\n                <div class=\"song-info\">\r\n                    <p class=\"song-title\">${song.name}</p>\r\n                    <p class=\"artist\">${song.artist}</p>\r\n                </div>\r\n                <div class=\"play-icon\">\r\n                    <i class=\"fa-solid fa-play\"></i>\r\n                </div>\r\n            `;\r\n            songItem.addEventListener('click', () => playAudio(song));\r\n            songItem.querySelector('.play-icon').addEventListener('click', (event) => {\r\n                event.stopPropagation();\r\n                playAudio(song);\r\n            });\r\n            grid.appendChild(songItem);\r\n        });\r\n    }\r\n\r\n    function playAudio(song) {\r\n        if (currentSource !== \"songs\") {\r\n            currentSource = \"songs\";\r\n            currentPlaylist = songs;\r\n        }\r\n        currentSongIndex = currentPlaylist.findIndex(s => s.src === song.src);\r\n        if (currentSongIndex === -1) {\r\n            // Nếu bài hát không có trong playlist hiện tại, thêm vào và phát\r\n            currentPlaylist.push(song);\r\n            currentSongIndex = currentPlaylist.length - 1;\r\n        }\r\n        loadSong(currentPlaylist[currentSongIndex]).then(() => {\r\n            audioPlayer.play();\r\n            playButton.classList.replace('fa-play', 'fa-pause');\r\n            musicPlayer.classList.add('visible');\r\n            if (currentPlayingItem) {\r\n                currentPlayingItem.classList.remove('playing');\r\n            }\r\n            currentPlayingItem = document.querySelector(`.song-item[data-src=\"${song.src}\"]`);\r\n            if (currentPlayingItem) {\r\n                currentPlayingItem.classList.add('playing');\r\n            }\r\n        });\r\n    }\r\n\r\n    audioPlayer.addEventListener('ended', nextSong);\r\n    audioPlayer.addEventListener('timeupdate', () => {\r\n        updateProgress();\r\n        currentTimeDisplay.textContent = formatTime(audioPlayer.currentTime);\r\n    });\r\n\r\n    audioPlayer.addEventListener('loadedmetadata', () => {\r\n        totalTimeDisplay.textContent = formatTime(audioPlayer.duration);\r\n    });\r\n\r\n    playButton.addEventListener('click', playPause);\r\n    nextButton.addEventListener('click', nextSong);\r\n    prevButton.addEventListener('click', prevSong);\r\n    shuffleButton.addEventListener('click', shuffleSong);\r\n    showPlaylistButton.addEventListener('click', showSongList);\r\n    refreshButton.addEventListener('click', loadSongs);\r\n\r\n    const logo = document.querySelector('.logo img');\r\n    logo.addEventListener('click', () => {\r\n        location.reload();\r\n    });\r\n\r\n    function formatTime(seconds) {\r\n        const minutes = Math.floor(seconds / 60);\r\n        const secs = Math.floor(seconds % 60);\r\n        return `${minutes}:${secs < 10 ? '0' : ''}${secs}`;\r\n    }\r\n\r\n    loadSongs();\r\n\r\n    // Expose các hàm ra global scope để chatbot gọi\r\n    window.playAudio = playAudio;\r\n    window.playPause = playPause;\r\n    window.nextSong = nextSong;\r\n    window.shuffleSong = shuffleSong;\r\n});"],"file":"app.dev.js"}